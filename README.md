
# Сопроводительная документация по проекту  
**"Разработка программного обеспечения для защиты организаций от атак с использованием BadUSB-устройств"**  


## 1. Назначение проекта  
Программное обеспечение (ПО) предназначено для защиты организаций от атак, использующих BadUSB-устройства, путем:  
- Мониторинга подключений USB-устройств.  
- Автоматической проверки устройств на соответствие "белому списку".  
- Блокировки неавторизованных устройств и оповещения администратора.  

**Целевая аудитория:**  
- Банки и финансовые учреждения.  
- Государственные организации.  
- Компании с высокими требованиями к информационной безопасности.  

---

## 2. Компоненты системы  
### 2.1. Панель администратора  
**Функционал:**  
- Управление "белым списком" USB-устройств (добавление, удаление, редактирование).  
- Просмотр логов подключений.  
- Настройка параметров безопасности.  

**Технологии:**  
- Backend: Python (Flask).  
- Frontend: Python (Flask-Admin).  
- База данных: PostgreSQL.  

**Доступ:** Только из локальной сети организации.  

### 2.2. Клиентский агент  
**Функционал:**  
- Мониторинг USB-портов в реальном времени.  
- Проверка устройств по VID/PID и другим дескрипторам.  
- Блокировка неавторизованных устройств и отключение компьютера от сети.  

**Поддерживаемые ОС:** Windows, Linux, MacOS.  
**Технологии:** Python, PyUSB.  

---

## 3. Руководство по установке и настройке  
### 3.1. Установка панели администратора  
1. **Требования:**  
   - Сервер с ОС Linux/Windows.  
   - Установленные Python 3.x, PostgreSQL.  

2. **Шаги:**  
   - Клонировать репозиторий проекта:  
     ```bash
     git clone https://github.com/IS-key/bad-usb_defence.git
     ```  
   - Установить зависимости:  
     ```bash
     pip install -r requirements.txt
     ```    
   - Инициализировать БД
	   ```bash
	   python3 app.py
	   ```
   - Настроить логин и пароль администратора
	   ```bash
	   flask init-admin
	   ```
   - Запустить сервер:  
     ```bash
     python3 app.py
     ```  

### 3.2. Установка клиентского агента  отдельно
1. **Требования:**  
   - Python 3.x.  
   - Библиотеки: PyUSB, requests.  

2. **Шаги:**  
   - Установить агент:  
     ```bash
     pip3 install -r requirements.txt
     ```  
   - Запустить агент:  
     ```bash
     sudo python3 usb_monitor.py
     ```  
### 3.3 Создание клиентского агента администратором
1. **Требования:**  
   - Python 3.x.  
   - Библиотеки: PyUSB, requests.  

2. **Шаги:** 
	Для генерации клиента под определенную ОС нужно запустить билдер на этой ОС
	```bash
	cd client
	```
	```bash
	python3 build_client.py https://api.example.com/api "YourCompany"
	```
	- https://api.example.com/api - API развернутой админ-панели.
	- "YourCompany" - название организации.
---

## 4. Руководство пользователя  
### 4.1. Для администратора  
1. **Добавление устройства в "белый список":**  
   - Войти в панель администратора.  
   - Перейти в раздел "Legit Device".  
   - Ввести VID, PID, iManufacturer, iProduct, iSerialNumber. 
   - Ввести данные сотрудника, для которого разрешены эти устройства. (ip-адрес в сети, hostname сотрудника, имя пользователя в ОС сотрудника)

2. **Просмотр логов:**  
   - В разделе "Log Entry" выбрать период и тип событий.  
   - Есть типы ("Event Type"):
-- **check** - запрос на проверку устройства. Когда к ПК сотрудника подключили новое устройство, ПО отправляет запрос типа check, чтобы выяснить разрешено ли это устройство.
-- **warning** - если к ПК сотрудника подключили устройство и после запроса типа check выяснилось, что это устройство не разрешено, то отправляется лог типа warning - сообщение об угрозе с данными сотрудника и ПК, к которому было произведено подключение вредоносного устройства.

### 4.2. Для сотрудников  
- Клиентский агент работает в фоновом режиме. При подключении нового USB-устройства ПО временно отключит его, отправит запрос на API администратора с данными сотрудника и устройства. API ответит разрешено ли данное устройство. Если разрешено, то устройство сново подключится. Если устройство запрещено, то оно отключается и администратор получает уведомление о том, что к такому-то сотруднику подключили неавторизованное USB-устройство. 

---

## 5. Соответствие нормативным требованиям  
ПО соответствует:  
- ФЗ-149 "Об информации, информационных технологиях и о защите информации".  
- ФЗ-152 "О персональных данных".  
- ФЗ-98 "О коммерческой тайне".  

---

## 6. Дополнительные материалы  
- **Исходный код:** Доступен на [GitHub](https://github.com/IS-key/bad-usb_defence.git).  